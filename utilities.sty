\ProvidesPackage{utilities}

\usepackage[nohead]{geometry}                                       % La «géométrie» de la page.
\usepackage{mathtools,amssymb,bm}                                   % Pour des possibilités en math étendues (mathtools => amsmath), permet entre autres le \eqcref qui à l'instar du simple cref met les parenthèses autour pour citer une équation. (le bm pour bold math)
%\usepackage{fontspec}                                              % Pour un accès à d'autres polices d'écriture (pas sûr, à vérifier).
\usepackage{fontspec}
\usepackage[french]{babel}                                          % Pour franciser LaTeX.
%\languageattribute{greek}{ancient}
\usepackage[babel=true]{csquotes}                                   % Pour une meilleure gestion des guillemets.
\frenchspacing                                                      % Pour un fonctionnement français de l'espacement autour des signes de ponctuation.
% déprécié : \usepackage[cyr]{aeguill}                              % Utilisation des guillements français « »
\usepackage{float}                                                  % Pour que les images soient bien placées par rapport au texte.
\usepackage{upgreek}                                                % Pour plus de symboles tel que \Upphi.
\usepackage{stmaryrd}                                               % Permet l'utilisation des brackets pour les entiers (\llbracket et \rrbracket).
\usepackage{caption}                                                % Pour caption une image (une légende).
\usepackage{subcaption}                                             % /\ pareil
\usepackage{xspace}                                                 % Pour conserver les espaces (utile à babel).
\usepackage{tikz}                                                   % Pour dessin 2d et 3d, graphs et plein de choses dessinnées.
\usepackage{tikz-3dplot}                                            % Pour plots 3d en tikz.
\usepackage{standalone}                                             % Pour import des standalone tikz (non compilés).
\usepackage{cancel}                                                 % Pour barrer des trucs.
\usepackage[shortlabels]{enumitem}                                  % Pour les énumérations (+ ajustement shortlabels par K.).
%\usepackage{yhmath}                                                % Pour les parenthèses au dessus de contenu maths.
\usepackage[pdfencoding=auto]{hyperref}                             % Pour les liens. En règle générale il doit être le dernier package chargé.
\usepackage{cleveref}                                               % Pour des réfs plus jolies. IMPÉRATIF : doit être chargé après le package hyperref.
\usepackage{needspace}                                              % Pour la définition du style des exercices (utilisé par K., je n'ose pas l'enlever; sa description : « Pour empêcher les coupures des pages au mauvaise endroits »).
\usepackage{mathrsfs}                                               % Pour le \mathscr.
\usepackage{pgfplots}                                               % Pour tracer des courbes en tikz (env axis).
\usepackage{tabularray}                                             % Pour utilisation de tableaux un peu plus customs.
\usepackage{bm}                                                     % Pour une utilisation puissante de polices mathématiques grasses.
\usepackage{emoji}                                                  % Pour utilisation d'emojis (attention, ne sont pas directement encodables en utf-8, il faut utiliser des commandes).
\usepackage[breakable,most]{tcolorbox}                              % Pour cadres très personnalisables.
\usepackage{arcs}                                                   % Pour la notation "arc de cercle".
\usepackage{comment}                                                % Pour commenter plusieurs lignes
\usepackage{parskip}                                                % Pour ajustement des espacements liés aux paragraphes.
\usepackage{changepage}                                             % Pour rendre insensible qqch aux marges du document.
\usepackage{wrapfig}                                                % Pour les wrapfigure.
\usepackage{href-ul}                                                % Pour des hyperliens soulignés puisque c'est manifestement une galère à faire tout seul........
\usepackage{fancyhdr}                                               % Pour headers et footers customisés.
\usepackage{lastpage}                                               % Pour connaître le nb de pages.

 
\tcbuselibrary{skins}                                               % Pour possibilités étendues en tcolorbox.
\usetikzlibrary{bending}                                            % Pour bidouillages sur des rotations.

\usetikzlibrary{calc}                                               % Pour permettre des opérations élémentaires lors de l'entrée de coordonnées en tikz.
\usetikzlibrary{patterns}                                           % Au moins pour l'accès au hachurage en TikZ.
\usetikzlibrary{arrows.meta}                                        % Pour personnaliser un peu les flèches en TikZ


\hypersetup{colorlinks=true, allcolors=blue}                        % Pour des liens en bleu (setup du package hyperref)
\frenchbsetup{ReduceListSpacing=true}

% À noter que l'on peut paramétrer le package geometry localement comme suit au lieu du moment du chargement du package :
% \geometry{
% 	a4paper,
% 	total={170mm,257mm},
% 	left=20mm,
% 	top=20mm,
% }



% Attention : à véfier et à sourcer, mais il me semble avoir lu sur un doc officiel que la norme française pour les notations des ensembles qui suivent était  \mathbf, même recommendation que l'AMS donc. Avis perso : je préfère écrire un R avec une barre en plus qu'un R gras au tableau.
\def\R{\mathbb{R}}                       % Notation usuelle de l'ensemble des réels
\def\C{\mathbb{C}}                       % Notation usuelle de l'ensemble des complexes
\def\N{\mathbb{N}}                       % Notation usuelle de l'ensemble des entiers naturels
\def\Z{\mathbb{Z}}                       % Notation usuelle de l'ensemble des entiers relatifs
\def\Q{\mathbb{Q}}                       % Notation usuelle de l'ensemble des rationnels
\def\D{\mathbb{D}}                       % Notation usuelle de l'ensemble des décimaux
\def\K{\mathbb{K}}                       % Notation usuelle d'un corps quelconque
\def\P{\mathbb{P}}                       % Notation usuelle de l'ensemble des nombres premiers, ou du P de probabilité
\def\parties{\mathcal{P}}                % Le P de l'ensemble des parties, et du P de P(n) pour les démos par réccurence
\def\Vect{\mathrm{Vect}}                 % Le Vect de la partie engendrée par des vecteurs

\def\alors{\implies}                     % Symbole  =>
\def\ssi{\iff}                           % Symbole <=>
\def\si{\Longleftarrow}                  % Symbole <=

\def\vide{\varnothing}                   % Le symbole ensemble vide que je préfère (rond barré, contrairement au \emptyset qui dans la police que je côtoie donne un zéro barré).
\def\im{\mathrm{Im}}                     % Le Im de l'image d'une application comme le Im de partie imaginaire d'un nombre complexe.
\def\rel{\mathcal R}                     % Le Re d'une notation usuelle d'une relation.

% Commandes utiles et commandes que je ne redéfinis pas :
% \binom{.}{.}      : notation parenthésée avec un terme au dessus et un en dessous pour une notation usuelle d'un coefficient binomial.
% \mid              : la barre « | » qui sert parfois de notation au « divise », et parfois de séparateur dans la notation en compréhension d'un ensemble.
% \pagestyle{empty} : désactive le foliotage (numérotation des pages).
% \mathfrak{.}      : police parfois utilisée pour noter le S du groupe symétrique (écriture gothique).
% \setminus         : la barre oblique inversée « \ » dont on se sert parfois comme notation de la différence ensembliste.


% Exemple de texturage d'un titre d'exercice 
% \def \enonceTexture {\tikz[overlay]{\draw[blue, opacity=0.7] (-0.1,0.4) -- (-0.1,-2.1) (-0.15,0.3) -- (-0.15,-1.2) (-0.4,-0.1) -- (2.1,-0.1);}}
% \def \correctionTexture {\tikz[overlay]{\draw[green, opacity=0.7] (-0.1,0.4) -- (-0.1,-2.1) (-0.15,0.3) -- (-0.15,-1.2) (-0.4,-0.1) -- (2.1,-0.1);}}

% pour espacer un peu le texte (de K.) :
\parskip=2mm
\parindent=7mm
\renewcommand{\baselinestretch}{1.3}
\setlength{\abovedisplayskip}{1pt}
\setlength{\belowdisplayskip}{3pt plus 4pt}
\setlength{\abovedisplayshortskip}{1pt plus 4pt}
\setlength{\belowdisplayshortskip}{2pt plus 4pt}



% Les paramètres sont dans l'ordre : f,domaine,codomaine,x,f(x)
% TODO à virer, jamais utilisé.
\newcommand{\fonction}[5] {
	#1 : \begin{array}{ c c c }
		#2 & \rightarrow & #3 \\
		#4 & \rightarrow & #5
	\end{array}
}

% Déterminant 2x2
\newcommand{\detDeux}[4] {
	\begin{vmatrix}
		{#1} & {#2} \\
		{#3} & {#4}
	\end{vmatrix}
}

\newcommand{\intersection}[1] { \bigcap\limits_{#1} }                  % Notation intersection indexée
\newcommand{\union}[1] { \bigcup\limits_{#1} }                         % Notation union indexée
\newcommand{\limite}[1] { \lim\limits_{#1} }                           % Notation lim en dessous de laquelle est écrit le paramètre
\newcommand{\bornesup}[1] { \sup\limits_{#1} }                         % Notation sup en dessous de laquelle est écrit le paramètre
\newcommand{\borneinf}[1] { \inf\limits_{#1} }                         % Notation inf en dessous de laquelle est écrit le paramètre
\newcommand{\limitesup}[1] { \limsup\limits_{#1} }                     % Notation limsup en dessous de laquelle est écrit le paramètre
\newcommand{\limiteinf}[1] { \liminf\limits_{#1} }                     % Notation liminf en dessous de laquelle est écrit le paramètre
\newcommand{\pgcd}[2] { \mathrm{pgcd}\left(#1,#2 \right) }             % Notation pgcd(.,.)
\newcommand{\norm}[1] { \lVert #1 \rVert }                             % Notation ||.||
\newcommand{\suite}[2] { \left( #1 \right)_{#2}}                       % Notation (u_n)_n    , 1er paramètre = terme général, 2ème = index
\newcommand{\ens}[1] { \left\{ \allowbreak #1 \allowbreak \right\} }   % Notation { . }
\newcommand{\enstq}[2] { \left\{ \allowbreak #1 \allowbreak \ \middle| % Pour la notation en compréhension { #1 | #2 } des ensembles
\ \allowbreak #2 \allowbreak \right\} }
\newcommand{\scal}[2] {\left\langle #1 , #2 \right\rangle}             % Notation <.,.>
\newcommand{\abs}[1] {\left| #1 \right|}                               % Notation |.|
\newcommand{\vect}[1] { \overrightarrow{#1} }                          % Notation d'un vecteur avec une flèche au dessus du terme allant vers la droite

% Notations d'un intervalle entier, fermé ou ouvert à droite ou à gauche
\newcommand{\intentierFF}[2]{ \left\llbracket #1, #2 \right\rrbracket }
\newcommand{\intentierFO}[2]{ \left\rrbracket #1, #2 \right\llbracket }
\newcommand{\intentierOF}[2]{ \left\llbracket #1, #2 \right\rrbracket }
\newcommand{\intentierOO}[2]{ \left\llbracket #1, #2 \right\llbracket }

% Intervalles classiques mais assistés pour éviter un espacement trop faible
\newcommand{\intFO}[2]{\mathopen[ #1 , #2 \mathclose[}
\newcommand{\intOF}[2]{\mathopen] #1 , #2 \mathclose]}
\newcommand{\intOO}[2]{\mathopen] #1 , #2 \mathclose[}

% Police sans empâtement
\renewcommand{\familydefault}{\sfdefault}





% Propre à un document perso important en rédaction, à déplacer et à revoir car très primitif
\newcommand{\info}[1]{\underline{#1}}
\definecolor{couleurdemos}{RGB}{5, 150, 80}
\definecolor{couleurexos}{RGB}{200,153,76}
\newcommand{\demo}[1]{\textcolor{couleurdemos}{\underline{#1}}}
\newcommand{\exo}[1]{\textcolor{couleurexos}{\underline{#1}}}
\def\todo{\textcolor{red}{\textbf{à faire}}}
\def\cqfd{\textbf{cqfd}}
\newcommand{\docpart}[1] {
	\begin{adjustwidth}{-\pagewidth}{-\pagewidth}
		\begin{center}
			\begin{tikzpicture}
				
				% Le varwidth permet de donner au noeud les dimensions en adéquations avec celles induites par le texte serré.
				\node[black] (partname) at (0,0) {\begin{varwidth}{0.7\textwidth}\center \Large \textbf{#1}\end{varwidth}};
				\draw[gray] (partname.west) + (-0.5,0) -- ++ (-4,0);
				\draw[gray] (partname.east) + (0.5,0) -- ++ (4,0); 
				%\draw[gray] (0,0) -- (2,0) node[anchor=west] at (0,0) {\Large #1} -- ++ (1,0);% -- [anchor=west] ++ (2,0);% node[black] at (0,0) {#1};
				%\node at (0,0) {#1};
				
			\end{tikzpicture}
		\end{center}
	\end{adjustwidth}
	\vspace{8mm}
	%\phantomsection % Pour ancrer la réf qui suit
	%\addcontentsline{toc}{section}{\texorpdfstring{#1}{une section}}
}

% TODO : s'intéresser au paquet xgreek pour le grec.

% info : reqno = right equation number